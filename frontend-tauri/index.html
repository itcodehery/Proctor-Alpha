<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Proctor</title>
  <link rel="stylesheet" href="/src/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
</head>

<body>
  <div id="app">
    <nav class="top-nav" role="navigation" aria-label="Main Navigation">
      <div class="nav-drag-handler" data-tauri-drag-region></div>
      <div class="window-controls">
        <div class="win-btn win-close" id="win-close"></div>
        <div class="win-btn win-minimize" id="win-minimize"></div>
        <div class="win-btn win-maximize" id="win-maximize"></div>
      </div>
      <div class="logo-section" data-tauri-drag-region>
        <div class="logo-box">PS</div>
        <span class="logo-text">Proctor</span>
        <div class="status-indicator active-only" role="status">
          <span class="dot"></span>
          <span class="status-text">Live Session</span>
        </div>
        <div class="status-indicator paused-only" style="display: none;" role="status">
          <span class="dot"></span>
          <span class="status-text">Session Paused</span>
        </div>
      </div>

      <div class="session-info">
        <span class="session-label">Duration</span>
        <div class="session-timer" aria-live="polite">00:00</div>
        <button id="end-session-btn" class="end-session-btn" aria-haspopup="dialog">
          End Session
        </button>
      </div>
    </nav>

    <div id="main-wrapper">
      <main id="split-horizontal" class="main-content">
        <div id="col-left" class="left-column">
          <section id="pane-editor" class="window code-editor" aria-label="Code Editor">
            <div class="window-header">
              <span class="window-title">Source Editor</span>
              <div class="shortcut-info" aria-hidden="true">Alt+Shift+E</div>
            </div>
            <div class="editor-layout">
              <aside class="file-explorer" aria-label="File Explorer">
                <div class="explorer-header">
                  <span>Files</span>
                  <div class="explorer-actions">
                    <button id="refresh-files-btn" class="icon-btn" title="Refresh">↻</button>
                    <button id="new-file-btn" class="icon-btn" title="New File">+</button>
                  </div>
                </div>
                <div id="file-list" class="file-list">
                  <!-- Files will be listed here -->
                </div>
              </aside>
              <div class="editor-main">
                <div id="tab-bar" class="tab-bar">
                  <!-- Tabs will be added here -->
                </div>
                <div id="monaco-container" class="window-content monaco-instance"></div>
              </div>
            </div>
          </section>

          <section id="pane-terminal" class="window terminal" aria-label="System Terminal">
            <div class="window-header">
              <span class="window-title">Terminal Shell</span>
              <div class="shortcut-info" aria-hidden="true">Alt+Shift+T</div>
            </div>
            <div id="shell-container" class="window-content"></div>
          </section>
        </div>

        <div id="col-right" class="right-column">
          <section class="window logger" aria-label="Activity Log">
            <div class="window-header">
              <span class="window-title">Activity Monitor</span>
              <div class="shortcut-info" aria-hidden="true">Alt+Shift+S</div>
            </div>
            <div class="window-content logger-content">
              <div class="log-entries" id="log-entries">
                <!-- Log entries will be added here dynamically -->
              </div>
              <button class="export-log-btn">Export Session Log</button>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Enhanced Confirmation Dialog -->
    <div id="dialog-overlay" class="dialog-overlay" role="dialog" aria-modal="true" aria-labelledby="modal-title">
      <div class="modal">
        <div class="modal-close-icon" role="button" aria-label="Close dialog">✕</div>
        <div class="modal-icon">!</div>
        <h2 id="modal-title" class="modal-title">End Session?</h2>
        <p class="modal-text">Enter the Admin Key to finalize and export this session. All workspace files will be
          saved.</p>

        <div class="admin-input-container">
          <input type="password" class="admin-input" id="admin-input" placeholder="Enter Admin Key"
            aria-label="Admin Key" />
        </div>
      </div>
    </div>

    <!-- New File Dialog -->
    <div id="new-file-dialog" class="dialog-overlay" role="dialog" aria-modal="true" aria-labelledby="new-file-title">
      <div class="modal">
        <div class="modal-close-icon" id="new-file-close-icon" role="button" aria-label="Close dialog">✕</div>
        <div class="modal-icon"
          style="background: rgba(16, 185, 129, 0.1); color: var(--accent-primary); border-color: var(--accent-primary);">
          +</div>
        <h2 id="new-file-title" class="modal-title">New File</h2>
        <p class="modal-text">Enter the name for the new file (e.g., script.py)</p>

        <div class="admin-input-container">
          <input type="text" class="admin-input" id="new-file-input" placeholder="filename.ext"
            aria-label="File Name" />
        </div>
        <div style="margin-top: 24px;">
          <button id="create-file-confirm-btn" class="end-session-btn"
            style="width: 100%; border-color: var(--accent-primary); color: var(--accent-primary);">Create File</button>
        </div>
      </div>
    </div>
  </div>
  <script type="module" src="/src/main.js"></script>
</body>

</html>